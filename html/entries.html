{{define "page"}}
	{{if .Event.Closed}}
		<samp>Event is closed, no changes can be made.</samp>
	{{else}}
		{{template "ShooterEntry" .ShooterEntry}}
	{{end}}
	{{$hasRanges := ge (len .Event.Ranges) 1}}
	{{if not $hasRanges}}<samp>This event has no ranges</samp>{{end}}
	{{with .Event.Shooters}}
		<p>Total Entries: {{len .}} <a href=/print-entry-list/{{$.Event.ID}}>Print Entry List</a>
		{{if not $.Event.Closed}}
			<table id=editRow>
		{{else}}
			<table>
		{{end}}
			<thead>
				<tr>
					<th class=asc>ID
					<th>Shooter
					<th>Club
					<th>Grade
					<th>Age Group
					<th>Locked
					<th>Ladies
					{{if not $.Event.Closed}}<td>Edit{{end}}
			</thead>
			{{range .}}
				{{if not .Hidden}}
					<tr>
						<td>{{.ID}}
						<td>{{if $hasRanges}}<a href=/print-cards/{{$.Event.ID}}/{{.ID}} title="Print scorecards for {{.FirstName}}">{{end}}{{.FirstName}} <span>{{.Surname}}</span>{{if $hasRanges}}</a>{{end}}
						<td>{{.Club}}
						<td>{{(grade .Grade).Name}}
						<td>{{ageGroup .AgeGroup}}
						{{if .Disabled}}<td class=tick>{{else}}<td>{{end}}
						{{if .Ladies}}<td class=tick>{{else}}<td>{{end}}
						{{if not $.Event.Closed}}<td>{{end}}
				{{end}}
			{{end}}
		</table>
	{{else}}
		<samp>No shooters entered in event.</samp>
	{{end}}
	{{if not .Event.Closed}}
		<template>
			<td></td>
			<td>
				<form method=post action=/22 id=editRow>
					<input name=f required placeholder="First name" accesskey=d maxlength=64>
					<input name=s required placeholder=Surname maxlength=64>
					<input type=hidden name=E value={{.Event.ID}}>
				</form>
			</td>
			<td>
				<input type=search name=C required maxlength=64 form=editRow list=C placeholder="Club name">
			</td>
			<td>
				<select name=g required form=editRow>
					{{template "optionList" .AvailableGrades}}
				</select>
			</td>
			<td>
				<select name=r form=editRow>
					<!--TODO load dynamic age groups from import file-->
					{{template "optionList" .AgeGroups}}
				</select>
			</td>
			<td>
				<input name=k type=checkbox form=editRow>
			</td>
			<td>
				<input name=x type=checkbox form=editRow>
			</td>
			<td>
				<button name=S form=editRow>Save</button>
			</td>
		</template>
		{{template "GradesAvailable" .GradesAvailable}}
		<script defer src=dirJS/shooterSearch></script>
		<script defer src=dirJS/entries></script>
		<script defer src=dirJS/editRow></script>
		<script defer src=dirJS/main></script>
	{{end}}
{{end}}