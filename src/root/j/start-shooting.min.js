!function(){"use strict";function t(){return S.getAttribute("data-class")}function e(){return Array.prototype.indexOf.call(S.getElementsByTagName("td"),y)}function n(){return T[t()].sighters}function i(t,e){var n=t.getAttribute("data-"+e);return null===n||void 0===n||isNaN(n)?0:parseInt(n,10)}function r(r){var a,o,u=t(),s=T[u].validShots.indexOf(r),d=parseInt(T[u].validScore[s],10),l=parseInt(T[u].validCenta[s],10);y.innerHTML=r,e()>=n()&&(a=i(S,"total")-i(y,"value")+d,o=i(S,"centers")-i(y,"center")+l,S.lastChild.innerHTML=a+"<sup>"+o+"</sup>",S.setAttribute("data-total",a),S.setAttribute("data-centers",o)),y.setAttribute("data-value",d),y.setAttribute("data-center",l)}function a(){var e,i,r=S.getElementsByTagName("td"),a=T[t()],o="",u=n(),s="",d=r.length;for(e=0;d>e;e++)s=r[e].innerHTML,s?u>e?(i=a.validShots.indexOf(s),o+=i&&a.validSighters[i]?a.validSighters[i]:"-"):o+=s:o+="-";return o}function o(t){var e=a();e=encodeURI(e).replace(/#/gi,"%23"),h.open("POST","/p/ctrl.php",!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send("scoreSave="+T.eventId+"~"+t+"~"+e),h.onreadystatechange=function(){200===h.status&&(document.getElementById(t).getElementsByClassName("t")[0].innerHTML=h.response)}}function u(t){t!==y&&(y&&y.removeAttribute("data-selected"),t&&t.setAttribute("data-selected",1),y=t)}function s(t){y&&(y.innerHTML!==t&&(r(t),o(S.getAttribute("id"))),y.nextSibling&&"TD"===y.nextSibling.nodeName&&u(y.nextSibling))}function d(){var t=0,e=document.getElementsByTagName("button"),n=e.length,i=function(t){return function(){s(t)}};for(t;n>t;t++)e[t].onclick=i(e[t].innerHTML)}function l(){var e,n,i,r=t();if(T.currentType!==r&&(T.currentType=r,r&&T[r].buttons)){for(e=T[r].buttons.length,n="",i=0;e>i;i++)n+="<button>"+T[r].buttons[i]+"</button>";document.getElementById("bu").innerHTML=n,d()}}function c(){var t=S.parentNode;t.insertBefore(document.getElementById("h"),S),t.insertBefore(document.getElementById("x"),S.nextSibling),l()}function g(){var t,e,i,a,s,d=document.getElementById("selectSighters").selectedIndex;if(S&&d>0){for(t=S.getElementsByTagName("td"),e=0,i=n(),a=y,s=i-d;i>s;s++)y=t[i+e++],r(t[s].innerHTML);y=a,u(t[i+d]),o(S.getAttribute("id"))}}function f(){var t,e,i="",r=document.createElement("select");for(t=n();t>=2;t--)i+="<option>Keep S"+t+" &gt;</option>";r.id="selectSighters",r.innerHTML="<option>Drop All</option>"+i+"<option>Keep All</option>",S.getAttribute("data-sighters")&&(r.selectedIndex=S.getAttribute("data-sighters")),r.onchange=function(){return function(){g()}},e=document.getElementById("selectSighters"),e.parentNode.replaceChild(r,e)}function v(t){t!==S&&(t.setAttribute("data-selected","1"),S&&S.removeAttribute("data-selected"),S=t,u(t.getElementsByTagName("td")[0]),c(),f())}function m(t){t!==y&&(u(t),S!==y.parentNode&&v(t.parentNode))}function p(){var t=0,e=S.getElementsByTagName("td"),n=e.length,i=function(t){return function(){m(t)}};for(t;n>t;t++)e[t].onclick=i(e[t]);S.setAttribute("data-visited",1)}function b(){var t=0,e=document.getElementsByClassName("name"),n=e.length,i=function(t){return function(){v(t),S.getAttribute("data-visited")||p()}};if(e)for(t;n>t;t++)e[t].onclick=i(e[t].parentNode)}var h,y=null,S=null,T={eventId:1,currentType:null,target:{sighters:2,validShots:"012345V6X",validScore:"012345555",validCenta:"000000111",validSighters:")!@#$%v^x",buttons:"012345VX"},fclass:{sighters:2,validShots:"012345V6X",validScore:"012345666",validCenta:"000000001",validSighters:")!@#$%v^x",buttons:"0123456X"}};window.XMLHttpRequest&&(h=new XMLHttpRequest),b()}();