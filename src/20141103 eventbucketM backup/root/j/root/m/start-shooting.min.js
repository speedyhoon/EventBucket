!function(){"use strict";function t(){return S.getAttribute("data-class")}function e(){return Array.prototype.indexOf.call(S.getElementsByTagName("td"),y)}function n(){return T[t()].sighters}function i(t,e){return~~t.getAttribute("data-"+e)}function r(r){var o,a,u=t(),d=T[u].validShots.indexOf(r),s=~~T[u].validScore[d],l=~~T[u].validCenta[d];y.innerHTML=r,e()>=n()&&(o=i(S,"total")-i(y,"value")+s,a=i(S,"centers")-i(y,"center")+l,S.lastChild.innerHTML=o+"<sup>"+a+"</sup>",S.setAttribute("data-total",o),S.setAttribute("data-centers",a)),y.setAttribute("data-value",s),y.setAttribute("data-center",l)}function o(){var e,i,r=S.getElementsByTagName("td"),o=T[t()],a="",u=n(),d="",s=r.length;for(e=0;s>e;e++)d=r[e].innerHTML,d?u>e?(i=o.validShots.indexOf(d),a+=i&&o.validSighters[i]?o.validSighters[i]:"-"):a+=d:a+="-";return a}function a(t){var e=o();e=encodeURI(e).replace(/#/gi,"%23"),h.open("POST",window.location.href,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send("scoreSave="+T.eventId+"~"+t+"~"+e),h.onreadystatechange=function(){200===h.status&&(document.getElementById(t).getElementsByClassName("t")[0].innerHTML=h.response)}}function u(t){t!==y&&(y&&y.removeAttribute("data-selected"),t&&t.setAttribute("data-selected",1),y=t)}function d(t){y&&(y.innerHTML!==t&&(r(t),a(S.getAttribute("id"))),y.nextSibling&&"TD"===y.nextSibling.nodeName&&u(y.nextSibling))}function s(){var t=0,e=document.getElementsByTagName("button"),n=e.length,i=function(t){return function(){d(t)}};for(t;n>t;t++)e[t].onclick=i(e[t].innerHTML)}function l(){var e,n,i,r=t();if(T.currentType!==r&&(T.currentType=r,r&&T[r].buttons)){for(e=T[r].buttons.length,n="",i=0;e>i;i++)n+="<button>"+T[r].buttons[i]+"</button>";document.getElementById("bu").innerHTML=n,s()}}function c(){var t=S.parentNode;t.insertBefore(document.getElementById("h"),S),t.insertBefore(document.getElementById("x"),S.nextSibling),l()}function g(){var t,e,i,o,d=document.getElementById("selectSighters").selectedIndex,s=0;if(S&&d>0){for(t=S.getElementsByTagName("td"),e=n(),i=y,o=e-d;e>o;o++)y=t[e+s++],r(t[o].innerHTML);y=i,u(t[e+d]),a(S.getAttribute("id"))}}function f(){var t,e,i="",r=document.createElement("select");for(t=n();t>=2;t--)i+="<option>Keep S"+t+" &gt;</option>";r.id="selectSighters",r.innerHTML="<option>Drop All</option>"+i+"<option>Keep All</option>",S.getAttribute("data-sighters")&&(r.selectedIndex=S.getAttribute("data-sighters")),r.onchange=function(){return function(){g()}},e=document.getElementById("selectSighters"),e.parentNode.replaceChild(r,e)}function m(t){t!==S&&(t.setAttribute("data-selected","1"),S&&S.removeAttribute("data-selected"),S=t,u(t.getElementsByTagName("td")[0]),c(),f())}function v(t){t!==y&&(u(t),S!==y.parentNode&&m(t.parentNode))}function p(){var t=0,e=S.getElementsByTagName("td"),n=e.length,i=function(t){return function(){v(t)}};for(t;n>t;t++)e[t].onclick=i(e[t]);S.setAttribute("data-visited",1)}function b(){var t=0,e=document.getElementsByClassName("name"),n=e.length,i=function(t){return function(){m(t),S.getAttribute("data-visited")||p()}};if(e)for(t;n>t;t++)e[t].onclick=i(e[t].parentNode)}var h,y=null,S=null,T={eventId:1,currentType:null,target:{sighters:2,validShots:"012345V6X",validScore:"012345555",validCenta:"000000111",validSighters:")!@#$%v^x",buttons:"012345VX"},fclass:{sighters:2,validShots:"012345V6X",validScore:"012345666",validCenta:"000000001",validSighters:")!@#$%v^x",buttons:"0123456X"}};window.XMLHttpRequest&&(h=new XMLHttpRequest),b()}();